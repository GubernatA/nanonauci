<!DOCTYPE html>
<html>
  <head>
    <title>Nanonauci w akcji!</title>
  </head>
  <body>
    <script>
    // CONST
    var CANVAS_WIDTH = 800;
    var CANVAS_HEIGHT = 600;
    var NANONAUT_WIDTH = 181;
    var NANONAUT_HEIGHT = 229;
    var NANONAUT_Y_ACCELERATION = 1;
    var GROUND_Y = 540;
    
    // INITIAL CONFIGURATION
    var canvas = document.createElement('canvas');
    var c = canvas.getContext('2d');
    canvas.width = CANVAS_WIDTH;
    canvas.height = CANVAS_HEIGHT;
    document.body.appendChild(canvas);
    
    var nanonautImage = new Image();
    nanonautImage.src = 'Nanonaut.png';
    
    var backgroundImage = new Image();
    backgroundImage.src = 'background.png';
        
    var nanonautX = 50;
    var nanonautY = 40;
    var nanonautYSpeed = 0;
    
    window.addEventListener('load',start);

    function start() {
      window.requestAnimationFrame(mainLoop);
    }

    // MAIN LOOP
    function mainLoop() {
      update();
      draw();
      window.requestAnimationFrame(mainLoop);
    }
    // CONTROL

    // UPDATE
    function update() {
    //Update Nanonaut position
      nanonautY = nanonautY + nanonautYSpeed;
      nanonautYSpeed = nanonautYSpeed + NANONAUT_Y_ACCELERATION;
      if(nanonautY > (GROUND_Y - NANONAUT_HEIGHT)){
        nanonautY = GROUND_Y - NANONAUT_HEIGHT;
        nanonautYSpeed = 0;
      }
    }
    
    // DRAWING
    function draw() {
    //Clear display
    //c.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);
    
    //Draw Sky
    c.fillStyle = 'LightSkyBlue';
    c.fillRect(0, 0, CANVAS_WIDTH, GROUND_Y - 40);
    
    //Draw Background
    c.drawImage(backgroundImage, 0, -210);
    
    //Draw Ground
    c.fillStyle = 'ForestGreen';
    c.fillRect(0, GROUND_Y - 40, CANVAS_WIDTH, CANVAS_HEIGHT - GROUND_Y + 40);
    
    //Draw Nanonaut
    c.drawImage(nanonautImage, nanonautX, nanonautY);
    }
    </script>
  </body>
</html>
